<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="css/style.css" />
</head>

<div id="stats">
    <tr>
        <td>
            &nbsp;&nbsp;Data:&nbsp;
            <span id="dataCount">0 bytes</span>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Money:&nbsp;
            <span id="moneyCount">$0</span>
        </td>
    </tr>
</div>
<div id="cmdWindow">
    <table id="responses">

    </table>
</div>
<form onsubmit="return false">
    <input id="input" type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
</form>
<footer id="version">
    Demo V0.1. Created based on <a href="https://github.com/jettcrowson/jettcrowson.github.io">this project.</a>
</footer>
<script src="dist/bundle.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

<script>
    $(function() {
        var cmd = new CMD({
            respond: function() {
                for (var i = 0; i < arguments.length; i++) {
                    $('#responses').append('<tr class="response"><td class="response">'+arguments[i]+'</td></tr>');
                }
            },
            save: function(cmdData) {
                if (typeof Storage !== "undefined") {
                    for (var i in cmdData) {
                        localStorage.setItem(i, JSON.stringify(cmdData[i]));
                    }
                }
            },
            load: function() {
                var storedDataNames = ['data', 'money', 'increment', 'autoIncrement', 'unlocked'];
                var loadObj = {};
                for (var i = 0; i < storedDataNames.length; i++) {
                    var dataName = storedDataNames[i];
                    loadObj[dataName] = JSON.parse(localStorage.getItem(dataName));
                }
                return loadObj;
            },
            update: function(cmdObj) {
                $('#dataCount').html(cmdObj.formatBytes);
                $('#moneyCount').html('$'+cmdObj.money);
            }
        });
        $(document).keypress(function(e) {
            if (e.which == 13) {
                cmd.command($('#input').val());
                cmd.historyBufferCurrentIdx = -1;
                $('#cmdWindow').scrollTop($('#cmdWindow')[0].scrollHeight);
            }
        });

        $('#input').keyup(function(e) {
            if (e.which === 38 || e.which === 40) {
                cmd.respond("Arrow key functionality has not yet been implemented.");
                console.log("Arrow key functionality has not yet been implemented.");
            }
        })
    });
</script>
</html>
